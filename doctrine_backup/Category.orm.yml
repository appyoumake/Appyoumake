# list of categorieds that wil be used to classify all apps.
# it is also used to categoriese users, this is simply used to provide default categories for new apps they create 
# this will support three levels, top = branch, mid = job area, bottom = anything.
# it is a simple tree with parent_id pointing to id in same table
# Uses Gedmo extension to provide tree functionality

Sinett\MLAB\BuilderBundle\Entity\Category:
  type: entity
  table: category
  repositoryClass: Gedmo\Tree\Entity\Repository\NestedTreeRepository
  gedmo:
    tree:
      type: nested
  indexes:
    name_index:
      columns: [ name ]
    enabled_index:
      columns: [ enabled ]
  
  id:
    id: 
      type: integer
      generator:
          strategy: AUTO
  
  fields:
      name:
          type: string
          length: 255
          fixed: false
          nullable: false

      system:
          type: boolean
          nullable: true
          options:
            default: false
            
      enabled:
          type: boolean
          nullable: true
          options:
            default: true
            
      lft:
        type: integer
        gedmo:
          - treeLeft
          
      rgt:
        type: integer
        gedmo:
          - treeRight
          
      root:
        type: integer
        nullable: true
        gedmo:
          - treeRoot
          
      lvl:
        type: integer
        gedmo:
          - treeLevel
          
  manyToOne:
    parent:
      targetEntity: Sinett\MLAB\BuilderBundle\Entity\Category
      inversedBy: children
      joinColumn:
        name: parent_id
        referencedColumnName: id
        onDelete: CASCADE
      gedmo:
        - treeParent
        
  oneToMany:
    children:
      targetEntity: Sinett\MLAB\BuilderBundle\Entity\Category
      mappedBy: parent
      orderBy:
        lft: ASC
      
  lifecycleCallbacks: {  }